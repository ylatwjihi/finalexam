<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ø§Ù„Ù„ØºØ© Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</title>
    <style>
        :root {
            --primary-color: #3d6e6a; /* Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ Ø¨Ø§Ø±Ø¯ */
            --secondary-color: #455A64; /* Ø±Ù…Ø§Ø¯ÙŠ Ù…Ø²Ø±Ù‚ */
            --light-color: #CFD8DC; /* Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
            --dark-color: #263238; /* Ø£Ø³ÙˆØ¯ Ø±Ù…Ø§Ø¯ÙŠ */
            --correct-color: #329d62; /* Ø£Ø®Ø¶Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© */
            --wrong-color: #F44336; /* Ø£Ø­Ù…Ø± Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø®Ø§Ø·Ø¦Ø© */
        }
            
        * {
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            color: var(--dark-color);
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            position: relative;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .timer {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            display: inline-block;
            position: absolute;
            left: 30px;
            top: 30px;
        }
        
        .units-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .unit-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .unit-btn:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }
        
        .quiz-section {
            display: none;
        }
        
        .quiz-section.active {
            display: block;
        }
        
        .question-part {
            display: none;
            margin-bottom: 30px;
        }
        
        .question-part.active {
            display: block;
        }
        
        .question {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-right: 4px solid var(--primary-color);
        }
        
        .question h3 {
            margin-top: 0;
            color: var(--secondary-color);
        }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }
        
        @media (max-width: 600px) {
            .options {
                grid-template-columns: 1fr;
            }
        }
        
        .option {
            background-color: white;
            border: 1px solid var(--light-color);
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        
        .option:hover {
            border-color: var(--secondary-color);
        }
        
        .option.selected {
            border-color: var(--primary-color);
            background-color: rgba(46, 125, 50, 0.1);
        }
        
        .navigation-btns {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .nav-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .nav-btn:hover {
            background-color: var(--primary-color);
        }
        
        .nav-btn:disabled {
            background-color: var(--light-color);
            cursor: not-allowed;
        }
        
        .submit-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            display: block;
            margin: 30px auto 0;
        }
        
        .submit-btn:hover {
            background-color: #1B5E20;
        }
        
        .results {
            display: none;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .results h2 {
            color: var(--primary-color);
            text-align: center;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-color);
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-question {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .user-answer.correct {
            color: var(--correct-color);
        }
        
        .user-answer.wrong {
            color: var(--wrong-color);
        }
        
        .correct-answer {
            color: var(--correct-color);
            font-weight: bold;
        }
        
        .score-display {
            text-align: center;
            font-size: 24px;
            margin: 20px 0;
            color: var(--primary-color);
        }
        
        .time-taken {
            text-align: center;
            font-size: 18px;
            color: var(--secondary-color);
            margin-bottom: 20px;
        }
        
        .print-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
        }
        
        .print-btn:hover {
            background-color: #37474F;
        }
        
        .question-image {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: block;
        }
        
        .image-note {
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
        }
        
        @media print {
            body * {
                visibility: hidden;
            }
            .container, .container * {
                visibility: visible;
            }
            .container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
            }
            .unit-btn, .timer, .nav-btn, .submit-btn, .print-btn {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="margin-top: 50px;" id="subject-name">Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ | Ø§Ù„Ø§Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</h1>
      <!-- ğŸ”· Ù‚Ø³Ù… Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø§Ø¯Ø© -->
<div class="overall-results" id="overall-results-box">
  <h3>ğŸ“Š Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù…Ø§Ø¯Ø©</h3>
  <canvas id="overallResultsChart"></canvas>
  <div id="overallResultsDetails" class="overall-stats"></div>
</div>

<!-- ğŸ”· Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ğŸ”· ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
<style>
  .overall-results {
    padding: 15px;
    margin: 20px 0;
    background-color: #f9f9f9;
    border-radius: 10px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0,0,0,0.05);
  }
  #overallResultsChart {
    max-width: 400px;
    margin: 0 auto 20px;
  }
  .overall-stats {
    font-weight: bold;
    color: #3d6e6a;
  }
</style>

<!-- ğŸ”· Ø³ÙƒØ±Ø¨Øª Ø¹Ø±Ø¶ ÙˆØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    // ğŸŸ¨ ØºÙŠÙ‘Ø± Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ§Ø­ Ø­Ø³Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©
    const subjectKey = 'english'; // Ù…Ø«Ø§Ù„: math, english, deen...

    const ctx = document.getElementById('overallResultsChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©', 'Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©'],
        datasets: [{
          data: [0, 0],
          backgroundColor: ['#4CAF50', '#F44336']
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' }
        }
      }
    });

    function updateOverallResults() {
      const allResults = JSON.parse(localStorage.getItem('quiz_results_english' + subjectKey)) || [];
      let totalCorrect = 0;
      let totalQuestions = 0;

      allResults.forEach(r => {
        totalCorrect += r.score;
        totalQuestions += r.total;
      });

      const percent = totalQuestions ? Math.round((totalCorrect / totalQuestions) * 100) : 0;

      document.getElementById('overallResultsDetails').textContent =
        `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: ${allResults.length} | Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¹Ø§Ù…: ${percent}%`;

      chart.data.datasets[0].data = [totalCorrect, totalQuestions - totalCorrect];
      chart.update();
    }

    // Ù†Ø¯Ø§Ø¡ Ù…Ø¨Ø§Ø´Ø± Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    updateOverallResults();

    // ğŸ” Ø§Ø³ØªØ¯Ø¹Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù†ØªÙŠØ¬Ø©
    window.saveQuizResult = function(score, total, timeSpentText = '') {
      let allResults = JSON.parse(localStorage.getItem('quiz_results_english' + subjectKey)) || [];
      allResults.push({
        score: score,
        total: total,
        percentage: Math.round((score / total) * 100),
        timeSpent: timeSpentText
      });
      localStorage.setItem('quiz_results_english' + subjectKey, JSON.stringify(allResults));
      updateOverallResults();
    };
  });
</script>

        <div class="timer" id="timer">00:00</div>
        
        <div class="units-list" id="units-list">
            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø¨Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø¹Ø¨Ø± JavaScript -->
        </div>
        
        <div class="quiz-section" id="quiz-section">
            <div class="question-part active" data-part="1">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ø¨Ø± JavaScript -->
            </div>
            
            <div class="navigation-btns">
                <button class="nav-btn" id="prev-btn" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                <button class="nav-btn" id="next-btn">Ø§Ù„ØªØ§Ù„ÙŠ</button>
            </div>
            
            <button class="submit-btn" id="submit-btn">ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
        </div>
        
        <div class="results" id="results">
            <h2>Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
            <div class="score-display" id="score-display"></div>
            <div class="time-taken" id="time-taken"></div>
            <div id="results-content">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù‡Ù†Ø§ -->
            </div>
            <button class="print-btn" id="print-btn">ØªØµØ¯ÙŠØ± Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙƒÙ…Ù„Ù PDF</button>
        </div>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
       const quizzes = {
    1: [
        {
            id: 1,
            question: "What did Arafat carry in his hands during his speech?",
            options: ["A peace treaty and a flag", "An olive branch and a gun.", "A book and a pen", "A key and a map"],
            answer: "An olive branch and a gun.",
            image: "img/english2-01.png"
        },
        {
            id: 2,
            question: "How many Palestinians were displaced after the 1948 disaster?",
            options: ["200,000", "500,000", "700,000", "1,000,000"],
            answer: "700,000",
            image: "img/english2-01.png"
        },
        {
            id: 3,
            question: "What does the olive branch symbolize in Arafatâ€™s speech?",
            options: ["Religion", "Resistance", "War", "Peace"],
            answer: "Peace",
            image: "img/english2-01.png"
        },
        {
            id: 4,
            question: "What was the purpose of Arafatâ€™s speech?",
            options: ["To announce a new war", "To declare independence", "To call for peace and recognition", "To criticize the UN"],
            answer: "To call for peace and recognition",
            image: "img/english2-01.png"
        },
        {
            id: 5,
            question: "According to the passage, what had the Palestinian cause received for many years?",
            options: ["Strong support", "Little attention", "Military aid", "Full recognition"],
            answer: "Little attention",
            image: "img/english2-01.png"
        },
        {
            id: 6,
            question: "Which organization voted to upgrade Palestine's status in 2012?",
            options: ["NATO", "UNESCO", "United Nations General Assembly", "Arab League"],
            answer: "United Nations General Assembly",
            image: "img/english2-01.png"
        },
        {
            id: 7,
            question: "What title was Palestine given by the UN in 2012?",
            options: ["Full Member State", "Observer State", "Non-member observer state", "Refugee Nation"],
            answer: "Non-member observer state",
            image: "img/english2-01.png"
        },
        {
            id: 8,
            question: "What was one result of Arafatâ€™s speech?",
            options: ["War broke out again", "Palestine was granted independence immediately", "It showed the cause would not be forgotten", "The UN expelled Israel"],
            answer: "It showed the cause would not be forgotten",
            image: "img/english2-01.png"
        },
        {
            id: 9,
            question: "What emotion did Arafatâ€™s words bring to Palestinians?",
            options: ["Confusion", "Anger", "Inspiration", "Disappointment"],
            answer: "Inspiration",
            image: "img/english2-01.png"
        },
        {
            id: 10,
            question: "What does the passage suggest about the struggle after Arafatâ€™s speech?",
            options: ["It ended quickly", "It had many challenges", "It led to war", "It was ignored"],
            answer: "It had many challenges",
            image: "img/english2-01.png"
        },
        {
            id: 11,
            question: "What is one reason for optimism according to the passage?",
            options: ["Decline of Palestinian leadership", "Increase in emigration", "Recognition by more countries", "Decrease in speeches"],
            answer: "Recognition by more countries",
            image: "img/english2-01.png"
        },
        {
            id: 12,
            question: "What was the purpose of building bridges between Palestine and the West?",
            options: ["To increase trade", "To reduce refugees", "To promote understanding and peace", "To start negotiations for war"],
            answer: "To promote understanding and peace",
            image: "img/english2-01.png"
        },
        {
            id: 13,
            question: "What does â€œDiasporaâ€ refer to in the passage?",
            options: ["A military group", "Refugees returning home", "Palestinians forced to live abroad", "A type of negotiation"],
            answer: "Palestinians forced to live abroad",
            image: "img/english2-01.png"
        },
        {
            id: 14,
            question: "What is the main idea of the passage?",
            options: [
                "The UN ignored Palestine",
                "Palestinian leaders always disagreed",
                "The journey of the Palestinian cause toward recognition and peace",
                "The 1948 war was the end of Palestine"
            ],
            answer: "The journey of the Palestinian cause toward recognition and peace",
            image: "img/english2-01.png"
        },
        {
            id: 15,
            question: "According to the passage, what helped bring more recognition to Palestine in recent years?",
            options: ["Economic reforms", "Armed conflict", "Diplomatic efforts", "Natural resources"],
            answer: "Diplomatic efforts",
            image: "img/english2-01.png"
        },
        {
            id: 16,
            question: "The Palestinian cause received strong international support immediately after 1948.",
            options: ["True", "False"],
            answer: "False",
            image: "img/english2-01.png"
        },
        {
            id: 17,
            question: "Arafat's speech showed that the Palestinian cause could not be forgotten.",
            options: ["True", "False"],
            answer: "True",
            image: "img/english2-01.png"
        },
        {
            id: 18,
            question: "The United Nations General Assembly voted in 2012 to remove Palestineâ€™s observer status.",
            options: ["True", "False"],
            answer: "False",
            image: "img/english2-01.png"
        },
        {
            id: 19,
            question: "Mahmoud Abbas is mentioned in the passage as a representative of the current Palestinian leadership.",
            options: ["True", "False"],
            answer: "True",
            image: "img/english2-01.png"
        },
        {
            id: 20,
            question: "The passage states that Arafat's speech was ignored by the international community.",
            options: ["True", "False"],
            answer: "False",
            image: "img/english2-01.png"
        }
    ],
    2: [
        {
            id: 1,
            question: "According to the text, your aim should be:",
            options: ["very general", "something difficult", "something measurable", "something enjoyable"],
            answer: "something measurable",
            image: "img/english2-02.png"
        },
        {
            id: 2,
            question: "What helps you keep going while learning something?",
            options: ["Setting very high goals", "Worrying about success", "Enjoying the experience", "Measuring everything"],
            answer: "Enjoying the experience",
            image: "img/english2-02.png"
        },
        {
            id: 3,
            question: "Spending too much time worrying about success will ....",
            options: ["Help you learn faster", "Slow down your progress", "Improve your final score", "Make things easier"],
            answer: "Slow down your progress",
            image: "img/english2-02.png"
        },
        {
            id: 4,
            question: "Telling others about your aim will make you ....",
            options: ["Less likely to continue", "More likely to give up", "Want to continue", "Forget about your goal"],
            answer: "Want to continue",
            image: "img/english2-02.png"
        },
        {
            id: 5,
            question: "Including other people in your goals will ....",
            options: ["Make you feel bored", "Make things less fun", "Make you not want to let them down", "Make you lose interest"],
            answer: "Make you not want to let them down",
            image: "img/english2-02.png"
        },
        {
            id: 6,
            question: "According to the text, if you do something with others, it will be...",
            options: ["More difficult", "Less fun", "Easier to forget", "More fun"],
            answer: "More fun",
            image: "img/english2-02.png"
        },
        {
            id: 7,
            question: "What does the text say about staying positive?",
            options: ["It is always enough", "It may not be enough", "It guarantees success", "It is unnecessary"],
            answer: "It may not be enough",
            image: "img/english2-02.png"
        },
        {
            id: 8,
            question: "What should you be ready for according to the text?",
            options: ["Perfect success", "Many mistakes", "Things going wrong", "Immediate results"],
            answer: "Things going wrong",
            image: "img/english2-02.png"
        },
        {
            id: 9,
            question: "Dividing your aim into smaller parts helps you...",
            options: ["Get tired faster", "Reach your goal step by step", "Feel more pressure", "Forget the aim"],
            answer: "Reach your goal step by step",
            image: "img/english2-02.png"
        },
        {
            id: 10,
            question: "According to paragraph 2, success should NOT be:",
            options: ["Feared", "Overthought", "Enjoyed", "Divided"],
            answer: "Overthought",
            image: "img/english2-02.png"
        },
        {
            id: 11,
            question: "What is necessary when things seem too hard?",
            options: ["Ignoring the problem", "Having no plan", "Planning for difficulties", "Complaining about it"],
            answer: "Planning for difficulties",
            image: "img/english2-02.png"
        },
        {
            id: 12,
            question: "Which advice is given about new experiences?",
            options: ["Always think about success", "Focus only on the results", "Enjoy the experience itself", "Avoid learning new things"],
            answer: "Enjoy the experience itself",
            image: "img/english2-02.png"
        },
        {
            id: 13,
            question: "Thinking generally about your aim is very helpful.",
            options: ["True", "False"],
            answer: "False",
            image: "img/english2-02.png"
        },
        {
            id: 14,
            question: "Staying positive is always enough according to the text.",
            options: ["True", "False"],
            answer: "False",
            image: "img/english2-02.png"
        },
        {
            id: 15,
            question: "Having a plan is important.",
            options: ["True", "False"],
            answer: "True",
            image: "img/english2-02.png"
        },
        {
            id: 16,
            question: "The best title for paragraph 1 is ...",
            options: ["Share it", "Enjoy yourself", "Think negative", "Set clear goals"],
            answer: "Set clear goals",
            image: "img/english2-02.png"
        },
        {
            id: 17,
            question: "The best title for paragraph 2 is ...",
            options: ["Share it", "Enjoy yourself", "Think negative", "Set clear goals"],
            answer: "Enjoy yourself",
            image: "img/english2-02.png"
        },
        {
            id: 18,
            question: "The best title for paragraph 3 is ...",
            options: ["Share it", "Step by step", "Think negative", "Set clear goals"],
            answer: "Share it",
            image: "img/english2-02.png"
        },
        {
            id: 19,
            question: "The best title for paragraph 4 is ...",
            options: ["Share it", "Enjoy yourself", "Think negative", "Set clear goals"],
            answer: "Think negative",
            image: "img/english2-02.png"
        },
        {
            id: 20,
            question: "The best title for paragraph 5 is ...",
            options: ["Share it", "Step by step", "Think negative", "Set clear goals"],
            answer: "Step by step",
            image: "img/english2-02.png"
        }
    ],


};


        document.addEventListener('DOMContentLoaded', function() {
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            const subjectName = "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ±ÙˆØ¹";
            const units = [
                { id: 1, name: " Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø£ÙˆÙ„" },
                { id: 2, name: "Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø«Ø§Ù†ÙŠ" },
                
                
            ];
            
            // ØªØ¹ÙŠÙŠÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø§Ø¯Ø©
            document.getElementById('subject-name').textContent = `Ø§Ø®ØªØ¨Ø§Ø± ${subjectName}`;
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª
            const unitsList = document.getElementById('units-list');
            units.forEach(unit => {
                const unitBtn = document.createElement('button');
                unitBtn.className = 'unit-btn';
                unitBtn.textContent = unit.name;
                unitBtn.dataset.unitId = unit.id;
                unitBtn.addEventListener('click', () => startQuiz(unit.id));
                unitsList.appendChild(unitBtn);
            });
            
            // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
            let currentUnit = null;
            let currentPart = 1;
            let totalParts = 0;
            let userAnswers = {};
            let timerInterval = null;
            let startTime = null;
            let timeLeft = localStorage.getItem('quiz_time_left') ? parseInt(localStorage.getItem('quiz_time_left')) : 3600; // 30 Ø¯Ù‚ÙŠÙ‚Ø© Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
            
            // Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const quizSection = document.getElementById('quiz-section');
            const resultsSection = document.getElementById('results');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const timerElement = document.getElementById('timer');
            const printBtn = document.getElementById('print-btn');
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
            function startTimer() {
                startTime = Date.now();
                updateTimerDisplay();
                timerInterval = setInterval(updateTimer, 1000);
                localStorage.setItem('quiz_time_left', timeLeft.toString());
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ù‚Øª
            function updateTimer() {
                timeLeft--;
                updateTimerDisplay();
                localStorage.setItem('quiz_time_left', timeLeft.toString());
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ù‚Øª
            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            function startQuiz(unitId) {
                currentUnit = unitId;
                userAnswers = {};
                currentPart = 1;
                
                // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ­Ø¯Ø§Øª
                unitsList.style.display = 'none';
                
                // Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                quizSection.style.display = 'block';
                quizSection.classList.add('active');
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
                setupQuestions(unitId);
                
                // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
                if (!timerInterval) {
                    startTimer();
                }
            }
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            function setupQuestions(unitId) {
                const questions = quizzes[unitId];
                totalParts = Math.ceil(questions.length / 3);
                
                // Ù…Ø³Ø­ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                const quizSection = document.getElementById('quiz-section');
                const existingParts = quizSection.querySelectorAll('.question-part');
                existingParts.forEach(part => {
                    if (!part.classList.contains('active')) {
                        part.remove();
                    }
                });
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ø£Ù‚Ø³Ø§Ù… Ø¬Ø¯ÙŠØ¯Ø©
                for (let i = 1; i <= totalParts; i++) {
                    if (i === 1) continue; // ØªØ®Ø·ÙŠ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„
                    
                    const partDiv = document.createElement('div');
                    partDiv.className = 'question-part';
                    partDiv.dataset.part = i;
                    quizSection.insertBefore(partDiv, document.querySelector('.navigation-btns'));
                }
                
                // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
                questions.forEach((question, index) => {
                    const partNumber = Math.floor(index / 3) + 1;
                    const partDiv = document.querySelector(`.question-part[data-part="${partNumber}"]`);
                    
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    questionDiv.dataset.questionId = question.id;
                    
                    const questionTitle = document.createElement('h3');
                    questionTitle.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${index + 1}: ${question.question}`;
                    
                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
                    if (question.image) {
                        const imageNote = document.createElement('div');
                        imageNote.className = 'image-note';
                        imageNote.textContent = 'Ø§Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø©:';
                        
                        const image = document.createElement('img');
                        image.className = 'question-image';
                        image.src = question.image;
                        image.alt = 'ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„';
                        
                        questionDiv.appendChild(imageNote);
                        questionDiv.appendChild(image);
                    }
                    
                    question.options.forEach((option, optIndex) => {
                        const optionDiv = document.createElement('div');
                        optionDiv.className = 'option';
                        optionDiv.textContent = option;
                        optionDiv.dataset.option = option;
                        
                        optionDiv.addEventListener('click', function() {
                            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¤Ø§Ù„
                            const allOptions = this.parentElement.querySelectorAll('.option');
                            allOptions.forEach(opt => opt.classList.remove('selected'));
                            
                            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
                            this.classList.add('selected');
                            
                            // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
                            userAnswers[question.id] = option;
                        });
                        
                        optionsDiv.appendChild(optionDiv);
                    });
                    
                    questionDiv.appendChild(questionTitle);
                    questionDiv.appendChild(optionsDiv);
                    partDiv.appendChild(questionDiv);
                });
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø£ÙˆÙ„
                showPart(1);
            }
            
            // Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ù…Ø¹ÙŠÙ†
            function showPart(partNumber) {
                // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
                document.querySelectorAll('.question-part').forEach(part => {
                    part.classList.remove('active');
                });
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                document.querySelector(`.question-part[data-part="${partNumber}"]`).classList.add('active');
                
                // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
                prevBtn.disabled = partNumber === 1;
                nextBtn.disabled = partNumber === totalParts;
                
                // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹
                const currentPartQuestions = document.querySelectorAll(`.question-part[data-part="${partNumber}"] .question`);
                currentPartQuestions.forEach(questionDiv => {
                    const questionId = parseInt(questionDiv.dataset.questionId);
                    if (userAnswers[questionId]) {
                        const options = questionDiv.querySelectorAll('.option');
                        options.forEach(option => {
                            if (option.dataset.option === userAnswers[questionId]) {
                                option.classList.add('selected');
                            }
                        });
                    }
                });
            }
            
            // ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            function submitQuiz() {
                clearInterval(timerInterval);
                localStorage.removeItem('quiz_time_left');
                
                // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                quizSection.style.display = 'none';
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                showResults();
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            function showResults() {
                const questions = quizzes[currentUnit];
                let correctCount = 0;
                const resultsContent = document.getElementById('results-content');
                resultsContent.innerHTML = '';
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                questions.forEach(question => {
                    const isCorrect = userAnswers[question.id] === question.answer;
                    if (isCorrect) correctCount++;
                    
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    
                    const resultQuestion = document.createElement('div');
                    resultQuestion.className = 'result-question';
                    resultQuestion.textContent = question.question;
                    
                    const userAnswerDiv = document.createElement('div');
                    userAnswerDiv.className = `user-answer ${isCorrect ? 'correct' : 'wrong'}`;
                    userAnswerDiv.textContent = `Ø¥Ø¬Ø§Ø¨ØªÙƒ: ${userAnswers[question.id] || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©'}`;
                    
                    const correctAnswerDiv = document.createElement('div');
                    correctAnswerDiv.className = 'correct-answer';
                    correctAnswerDiv.textContent = `Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: ${question.answer}`;
                    
                    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                    if (question.image) {
                        const image = document.createElement('img');
                        image.className = 'question-image';
                        image.src = question.image;
                        image.alt = 'ØµÙˆØ±Ø© Ø§Ù„Ø³Ø¤Ø§Ù„';
                        image.style.maxWidth = '300px';
                        resultItem.appendChild(image);
                    }
                    
                    resultItem.appendChild(resultQuestion);
                    resultItem.appendChild(userAnswerDiv);
                    resultItem.appendChild(correctAnswerDiv);
                    resultsContent.appendChild(resultItem);
                });
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
                const scorePercentage = Math.round((correctCount / questions.length) * 100);
                document.getElementById('score-display').textContent = `Ø¹Ù„Ø§Ù…ØªÙƒ: ${correctCount} Ù…Ù† ${questions.length} (${scorePercentage}%)`;
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚
                const timeSpent = 3600 - timeLeft;
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('time-taken').textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø³ØªØºØ±Ù‚: ${minutes} Ø¯Ù‚Ø§Ø¦Ù‚ Ùˆ ${seconds} Ø«ÙˆØ§Ù†ÙŠ`;
                
                // Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬
                resultsSection.style.display = 'block';
                saveQuizResult(correctCount, questions.length, `${minutes} Ø¯Ù‚Ø§Ø¦Ù‚ Ùˆ ${seconds} Ø«ÙˆØ§Ù†ÙŠ`);

            }
            
            // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
            prevBtn.addEventListener('click', function() {
                if (currentPart > 1) {
                    currentPart--;
                    showPart(currentPart);
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (currentPart < totalParts) {
                    currentPart++;
                    showPart(currentPart);
                }
            });
            
            submitBtn.addEventListener('click', submitQuiz);
            
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø¤Ù‚Øª Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø§Ø±ÙŠ
            if (localStorage.getItem('quiz_time_left')) {
                updateTimerDisplay();
            }
        });
    </script>
</body>
</html>